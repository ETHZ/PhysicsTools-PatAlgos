process TestCleaners = {
    untracked PSet maxEvents = { untracked int32 input = 3 }
    #untracked PSet options = { untracked bool wantSummary = true }

    source = PoolSource { 
        untracked vstring fileNames = {'file:in.root'} 
        untracked uint32 skipEvents = 182
    }
    #include "PhysicsTools/PatAlgos/test/RelValTTbar.168.cff"
    #include "PhysicsTools/PatAlgos/test/RelValSingleElectronPt35.168.cff"

    module cleanMuons = PATMuonCleaner { 
        InputTag muonSource = muons
    }

    module cleanElectrons = PATElectronCleaner {
        InputTag electronSource   = pixelMatchGsfElectrons
        bool     removeDuplicates = true
    }

    module cleanJets = PATCaloJetCleaner {
        InputTag jetSource = iterativeCone5CaloJets

        VPSet removeOverlaps = {
            { // discard jets that match with clean electrons
              InputTag collection = cleanElectrons
              double   deltaR     = 0.3
            }
        }
    }

    #path p = { cleanMuons, cleanElectrons, cleanJets }
    path p = {  cleanElectrons, cleanJets }

    module out = PoolOutputModule {
        untracked string fileName = "/tmp/gpetrucc/out.root"
        untracked vstring outputCommands = {
            "drop *",
            "keep recoCaloJets_*_*_*",
            "keep pixelMatchGsfElectrons_*_*_*" 
            ,"keep *_*_*_TestCleaners"
            #,"keep *_cleanJets_*_TestCleaners"
        }
    }

    endpath e = { out }
}
